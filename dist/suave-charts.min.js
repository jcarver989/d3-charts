(function(){var Svg$$module$target$coffeescript$svg,module$target$coffeescript$svg=Svg$$module$target$coffeescript$svg=function(){function c(a,d,b){this.margin=b;b=d.split(":");d=b[0];b=b[1];this.aspectRatio=[parseInt(d),parseInt(b)];this.domElement=document.querySelector(a);this.container=d3.select(this.domElement).append("svg").attr("preserveAspectRatio","xMinYMin");this.chart=this.container.append("g")}c.prototype.resize=function(a){var d,b;null==a&&(a=this.margin);b=this.domElement.offsetWidth;d=b/this.aspectRatio[0]*
this.aspectRatio[1];this.width=b-a.left-a.right;this.height=d-a.bottom-a.top;this.container.attr("width",b).attr("height",d);return this.chart.attr("transform","translate("+a.left+","+a.top+")")};return c}();var defaultBarOptions$$module$target$coffeescript$defaults,defaultDonutOptions$$module$target$coffeescript$defaults,defaultHistogramOptions$$module$target$coffeescript$defaults,defaultLineOptions$$module$target$coffeescript$defaults,mergeOptions$$module$target$coffeescript$defaults;mergeOptions$$module$target$coffeescript$defaults=function(c,a){var d,b;b={};for(d in c)b[d]=c[d];for(d in a)b[d]=a[d];return b};
defaultLineOptions$$module$target$coffeescript$defaults={autoMargins:!0,aspectRatio:"16:9",dotSize:6,grid:!0,xScale:"ordinal",yScale:"linear",smoothLines:!1,stack:!1,tooltips:!0,xLabelFormat:null,yLabelFormat:null,tooltipFormat:function(c){return d3.format(",.0f")(c)},margin:{top:50,bottom:50,right:80,left:80}};
defaultBarOptions$$module$target$coffeescript$defaults={aspectRatio:"16:9",grid:!0,tooltips:!0,layout:"vertical",xLabelFormat:null,yLabelFormat:null,tooltipFormat:function(c){return d3.format(",.0f")(c)},barSpacing:.1,margin:{top:50,bottom:50,right:80,left:80}};
defaultHistogramOptions$$module$target$coffeescript$defaults={aspectRatio:"16:9",grid:!0,tooltips:!0,layout:"vertical",xLabelFormat:null,yLabelFormat:null,tooltipFormat:function(c){return d3.format(",.0f")(c)},bins:20,ticks:20,domain:null,margin:{top:50,bottom:50,right:80,left:80}};defaultDonutOptions$$module$target$coffeescript$defaults={aspectRatio:"16:9",holeSize:.5,margin:{top:0,bottom:0,right:0,left:0}};
var module$target$coffeescript$defaults={mergeOptions:mergeOptions$$module$target$coffeescript$defaults,lineOptions:defaultLineOptions$$module$target$coffeescript$defaults,barOptions:defaultBarOptions$$module$target$coffeescript$defaults,histogramOptions:defaultHistogramOptions$$module$target$coffeescript$defaults,donutOptions:defaultDonutOptions$$module$target$coffeescript$defaults};var AbstractChart$$module$target$coffeescript$abstract_chart,Svg$$module$target$coffeescript$abstract_chart,defaults$$module$target$coffeescript$abstract_chart;defaults$$module$target$coffeescript$abstract_chart=module$target$coffeescript$defaults;Svg$$module$target$coffeescript$abstract_chart=module$target$coffeescript$svg;
var module$target$coffeescript$abstract_chart=AbstractChart$$module$target$coffeescript$abstract_chart=function(){function c(a,d,b){null==d&&(d={});null==b&&(b={});this.options=defaults$$module$target$coffeescript$abstract_chart.mergeOptions(d,b);this.svg=new Svg$$module$target$coffeescript$abstract_chart(a,this.options.aspectRatio,this.options.margin);this.listenerBound=!1;this.axisLabelPadding=10}c.prototype.draw=function(){if(!this.listenerBound)return window.addEventListener("resize",this.render),
this.listenerBound=!0};c.prototype.remove=function(){var a,d;window.removeEventListener("resize",this.render);a=this.svg.domElement;for(d=[];a.firstChild;)d.push(a.removeChild(a.firstChild));return d};return c}();var filterTicks$$module$target$coffeescript$filter_ticks,module$target$coffeescript$filter_ticks=filterTicks$$module$target$coffeescript$filter_ticks=function(c,a,d){return"ordinal"===d?(a=a.domain(),c=a.length/(c-2),a.filter(function(b,a){},0===i||label===a[a.length-1]?!0:0===i%c)):a.ticks(c)};var Axes$$module$target$coffeescript$axes,filterTicks$$module$target$coffeescript$axes,bind$$module$target$coffeescript$axes=function(c,a){return function(){return c.apply(a,arguments)}};filterTicks$$module$target$coffeescript$axes=module$target$coffeescript$filter_ticks;
var module$target$coffeescript$axes=Axes$$module$target$coffeescript$axes=function(){function c(a,d,b,c,e){this.xScale=d;this.yScale=b;this.options=c;this.axisLabelPadding=e;this.newAxis=bind$$module$target$coffeescript$axes(this.newAxis,this);this.xAxisSelection=a.append("g").attr("class","x axis");this.yAxisSelection=a.append("g").attr("class","y axis");this.xAxis=this.newAxis(this.xScale,"bottom");this.yAxis=this.newAxis(this.yScale,"left")}c.prototype.draw=function(a,d){var b;this.xAxisSelection.attr("transform",
"translate(0,"+d+")");this.options.grid&&(this.xAxis.tickSize(-d,0),this.yAxis.tickSize(-a,0));this.options.xLabelInterval?(b=function(){switch(this.options.xLabelInterval){case "seconds":return d3.time.seconds;case "minutes":return d3.time.minutes;case "hours":return d3.time.hours;case "days":return d3.time.days;case "months":return d3.time.months;case "years":return d3.time.years}}.call(this),this.xAxis.ticks(b)):null!=this.options.ticks&&0<this.options.ticks&&(b=filterTicks$$module$target$coffeescript$axes(this.options.ticks,
this.xScale,this.options.xScale),this.xAxis.tickValues(b));this.xAxisSelection.call(this.xAxis);return this.yAxisSelection.call(this.yAxis)};c.prototype.newAxis=function(a,d){return d3.svg.axis().scale(a).orient(d).tickPadding(this.axisLabelPadding)};return c}();var MarginCalculator$$module$target$coffeescript$margin_calculator,module$target$coffeescript$margin_calculator=MarginCalculator$$module$target$coffeescript$margin_calculator=function(){function c(a){this.svg=a}c.prototype.calcLeftMargin=function(a,d,b,c){var e;null==b&&(b="y");null==c&&(c=20);b=this.svg.chart.append("g").attr("class",b+" axis").attr("opacity",0);b.call(a);a=b.selectAll("text").sort(function(b,a){return a.toString().length-b.toString().length});d=1<=a.length&&1<=a[0].length?(e=a[0][0].getBBox(),
Math.round(e.width)+c):d;b.remove();return d};return c}();var Tooltip$$module$target$coffeescript$tooltip,bind$$module$target$coffeescript$tooltip=function(c,a){return function(){return c.apply(a,arguments)}},module$target$coffeescript$tooltip=Tooltip$$module$target$coffeescript$tooltip=function(){function c(a){this.hide=bind$$module$target$coffeescript$tooltip(this.hide,this);this.show=bind$$module$target$coffeescript$tooltip(this.show,this);this.html=bind$$module$target$coffeescript$tooltip(this.html,this);this.cssClass="suave-tooltip";this.tip=d3.select(a.createElement("div"));
this.tip.attr("class",this.cssClass);a.body.appendChild(this.tip.node())}c.prototype.html=function(a){return this.tip.html(a)};c.prototype.show=function(a){a=this.offset(a);this.tip.attr("class",this.cssClass+" show");return this.tip.style({position:"absolute",top:a.top+"px",left:a.left+"px"})};c.prototype.hide=function(){return this.tip.attr("class",this.cssClass)};c.prototype.offset=function(a){var d,b;d=a.getBoundingClientRect();a=d.left+(d.right-d.left)/2;b=this.tip.node().getBoundingClientRect();
return{top:d.top-(b.bottom-b.top+10)+window.scrollY,left:a-(b.right-b.left)/2+window.scrollX}};return c}();var AbstractChart$$module$target$coffeescript$bar_chart,BarChart$$module$target$coffeescript$bar_chart,MarginCalculator$$module$target$coffeescript$bar_chart,Tooltip$$module$target$coffeescript$bar_chart,defaultBarOptions$$module$target$coffeescript$bar_chart,filterTicks$$module$target$coffeescript$bar_chart,bind$$module$target$coffeescript$bar_chart=function(c,a){return function(){return c.apply(a,arguments)}},extend$$module$target$coffeescript$bar_chart=function(c,a){function d(){this.constructor=
c}for(var b in a)hasProp$$module$target$coffeescript$bar_chart.call(a,b)&&(c[b]=a[b]);d.prototype=a.prototype;c.prototype=new d;c.__super__=a.prototype;return c},hasProp$$module$target$coffeescript$bar_chart={}.hasOwnProperty;AbstractChart$$module$target$coffeescript$bar_chart=module$target$coffeescript$abstract_chart;MarginCalculator$$module$target$coffeescript$bar_chart=module$target$coffeescript$margin_calculator;Tooltip$$module$target$coffeescript$bar_chart=module$target$coffeescript$tooltip;
defaultBarOptions$$module$target$coffeescript$bar_chart=module$target$coffeescript$defaults.barOptions;filterTicks$$module$target$coffeescript$bar_chart=module$target$coffeescript$filter_ticks;
var module$target$coffeescript$bar_chart=BarChart$$module$target$coffeescript$bar_chart=function(c){function a(d,b){null==b&&(b={});this.render=bind$$module$target$coffeescript$bar_chart(this.render,this);a.__super__.constructor.call(this,d,defaultBarOptions$$module$target$coffeescript$bar_chart,b);this.calc=new MarginCalculator$$module$target$coffeescript$bar_chart(this.svg);this.x=d3.scale.ordinal();this.groupedX=d3.scale.ordinal();this.y=d3.scale.linear();this.xAxis=d3.svg.axis().scale(this.x).tickFormat(this.options.xLabelFormat).outerTickSize(0).tickPadding(this.axisLabelPadding);
this.yAxis=d3.svg.axis().scale(this.y).tickFormat(this.options.yLabelFormat).tickPadding(this.axisLabelPadding);"vertical"===this.options.layout?(this.xAxis.orient("bottom"),this.yAxis.orient("left")):(this.xAxis.orient("left"),this.yAxis.orient("bottom"))}extend$$module$target$coffeescript$bar_chart(a,c);a.prototype.render=function(){var a;this.svg.resize();a="vertical"===this.options.layout?(this.options.grid?this.yAxis.tickSize(-this.svg.width,0):void 0,{xTransform:"translate(0, "+this.svg.height+
")",yTransform:"",groupsTransform:function(b){return function(a){return"translate("+b.x(a)+", 0)"}}(this),xRange:[0,this.svg.width],yRange:[this.svg.height,0],barX:function(b){return function(a,d){return b.groupedX(d)}}(this),barY:function(b){return function(a){return b.y(a)}}(this),barWidth:function(b){return function(){return b.groupedX.rangeBand()}}(this),barHeight:function(b){return function(a){return b.svg.height-b.y(a)}}(this)}):(this.options.grid?this.yAxis.tickSize(-this.svg.height,0):void 0,
{xTransform:"",yTransform:"translate(0, "+this.svg.height+")",groupsTransform:function(b){return function(a){return"translate(0, "+b.x(a)+")"}}(this),xRange:[0,this.svg.height],yRange:[0,this.svg.width],barX:function(b){return function(b){return 0}}(this),barY:function(b){return function(a,d){return b.groupedX(d)}}(this),barHeight:function(b){return function(){return b.groupedX.rangeBand()}}(this),barWidth:function(b){return function(a){return b.y(a)}}(this)});this.x.rangeRoundBands(a.xRange,.1);
this.groupedX.rangeRoundBands([0,this.x.rangeBand()],this.options.barSpacing);this.y.range(a.yRange);this.xAxisSelection.attr("transform",a.xTransform).call(this.xAxis);this.yAxisSelection.attr("transform",a.yTransform).call(this.yAxis);this.groups.attr("transform",a.groupsTransform);return this.bars.attr("x",a.barX).attr("y",a.barY).attr("width",a.barWidth).attr("height",a.barHeight)};a.prototype.draw=function(d){var b,c,e,f;a.__super__.draw.call(this);c=function(){var a,c,g,f;g=d.bars;f=[];a=0;
for(c=g.length;a<c;a++)b=g[a],f.push("[object Array]"===Object.prototype.toString.call(b)?b:[b]);return f}();this.y.domain([0,d3.max(d3.merge(c,function(a){return d3.max(a)}))]);this.x.domain(d.labels);this.groupedX.domain(c[0].map(function(a,b){return b}));null!=this.options.ticks&&0<this.options.ticks&&this.xAxis.tickValues(filterTicks$$module$target$coffeescript$bar_chart(this.options.ticks,this.x,"ordinal"));"vertical"===this.options.layout?this.options.margin.left=this.calc.calcLeftMargin(this.yAxis,
this.options.margin.left):(this.x.rangeRoundBands([0,10],.1),this.options.margin.left=this.calc.calcLeftMargin(this.xAxis,this.options.margin.left,"x"));this.xAxisSelection=this.svg.chart.append("g").attr("class","x axis");this.yAxisSelection=this.svg.chart.append("g").attr("class","y axis");this.groups=this.svg.chart.selectAll(".barGroup").data(d.labels).enter().append("g").attr("class",function(a,b){return"barGroup barGroup-"+b+" "+a});this.bars=this.groups.selectAll(".bar").data(function(a,b){return c[b]}).enter().append("rect").attr("class",
function(a,b){return"bar bar-"+b});this.options.tooltips&&(f=this.options.tooltipFormat,e=this.tip||(this.tip=new Tooltip$$module$target$coffeescript$bar_chart(document)),this.bars.on("mouseover",function(a){e.html(f(a));return e.show(this)}),this.bars.on("mouseout",function(a){return e.hide()}));return this.render()};return a}(AbstractChart$$module$target$coffeescript$bar_chart);var AbstractChart$$module$target$coffeescript$donut_chart,DonutChart$$module$target$coffeescript$donut_chart,defaultDonutOptions$$module$target$coffeescript$donut_chart,bind$$module$target$coffeescript$donut_chart=function(c,a){return function(){return c.apply(a,arguments)}},extend$$module$target$coffeescript$donut_chart=function(c,a){function d(){this.constructor=c}for(var b in a)hasProp$$module$target$coffeescript$donut_chart.call(a,b)&&(c[b]=a[b]);d.prototype=a.prototype;c.prototype=new d;c.__super__=
a.prototype;return c},hasProp$$module$target$coffeescript$donut_chart={}.hasOwnProperty;AbstractChart$$module$target$coffeescript$donut_chart=module$target$coffeescript$abstract_chart;defaultDonutOptions$$module$target$coffeescript$donut_chart=module$target$coffeescript$defaults.donutOptions;
var module$target$coffeescript$donut_chart=DonutChart$$module$target$coffeescript$donut_chart=function(c){function a(d,b){null==b&&(b={});this.draw=bind$$module$target$coffeescript$donut_chart(this.draw,this);this.render=bind$$module$target$coffeescript$donut_chart(this.render,this);a.__super__.constructor.call(this,d,defaultDonutOptions$$module$target$coffeescript$donut_chart,b);this.options.margin={top:0,bottom:0,left:0,right:0};this.arc=d3.svg.arc();this.pie=d3.layout.pie().sort(null).value(function(a){return a[1]})}
extend$$module$target$coffeescript$donut_chart(a,c);a.prototype.render=function(){var a;this.svg.resize();a=Math.min(this.svg.width,this.svg.height)/2;this.svg.chart.attr("transform","translate("+this.svg.width/2+", "+this.svg.height/2+")");this.arc.innerRadius(a).outerRadius(a-a*this.options.holeSize);this.arcs.attr("d",this.arc);return this.labels.attr("transform",function(a){return function(d){return"translate("+a.arc.centroid(d)+")"}}(this))};a.prototype.draw=function(d){a.__super__.draw.call(this);
this.enter=this.svg.chart.selectAll(".arc").data(this.pie(d)).enter().append("g").attr("class",function(a,d){return"arc arc-"+d+" arc-"+a.data[0]+"}"});this.arcs=this.enter.append("path");this.labels=this.enter.append("text").attr("dy",".35em").text(function(a){return a.data[0]});return this.render()};return a}(AbstractChart$$module$target$coffeescript$donut_chart);var AbstractChart$$module$target$coffeescript$histogram,Histogram$$module$target$coffeescript$histogram,MarginCalculator$$module$target$coffeescript$histogram,Tooltip$$module$target$coffeescript$histogram,defaultHistogramOptions$$module$target$coffeescript$histogram,bind$$module$target$coffeescript$histogram=function(c,a){return function(){return c.apply(a,arguments)}},extend$$module$target$coffeescript$histogram=function(c,a){function d(){this.constructor=c}for(var b in a)hasProp$$module$target$coffeescript$histogram.call(a,
b)&&(c[b]=a[b]);d.prototype=a.prototype;c.prototype=new d;c.__super__=a.prototype;return c},hasProp$$module$target$coffeescript$histogram={}.hasOwnProperty;AbstractChart$$module$target$coffeescript$histogram=module$target$coffeescript$abstract_chart;MarginCalculator$$module$target$coffeescript$histogram=module$target$coffeescript$margin_calculator;Tooltip$$module$target$coffeescript$histogram=module$target$coffeescript$tooltip;defaultHistogramOptions$$module$target$coffeescript$histogram=module$target$coffeescript$defaults.histogramOptions;
var module$target$coffeescript$histogram=Histogram$$module$target$coffeescript$histogram=function(c){function a(d,b){null==b&&(b={});this.render=bind$$module$target$coffeescript$histogram(this.render,this);a.__super__.constructor.call(this,d,defaultHistogramOptions$$module$target$coffeescript$histogram,b);this.calc=new MarginCalculator$$module$target$coffeescript$histogram(this.svg);this.x=d3.scale.linear();this.y=d3.scale.linear();this.xAxis=d3.svg.axis().scale(this.x).outerTickSize(0).tickFormat(this.options.xLabelFormat).tickPadding(this.axisLabelPadding);
this.yAxis=d3.svg.axis().scale(this.y).tickFormat(this.options.yLabelFormat).tickPadding(this.axisLabelPadding);"vertical"===this.options.layout?(this.xAxis.orient("bottom"),this.yAxis.orient("left")):(this.xAxis.orient("left"),this.yAxis.orient("bottom"))}extend$$module$target$coffeescript$histogram(a,c);a.prototype.render=function(){var a,b;this.svg.resize();a=this.histogram[0];b="vertical"===this.options.layout?(this.options.grid?this.yAxis.tickSize(-this.svg.width,0):void 0,{xRange:[0,this.svg.width],
yRange:[this.svg.height,0],xTransform:"translate(0, "+this.svg.height+")",yTransform:"",barsTransform:function(a){return function(b){return"translate("+a.x(b.x)+", "+a.y(b.y)+")"}}(this),barWidth:function(b){return function(c){return b.x(a.x+a.dx)-b.x(a.x)-1}}(this),barHeight:function(a){return function(b){return a.svg.height-a.y(b.y)}}(this)}):(this.options.grid?this.yAxis.tickSize(-this.svg.height,0):void 0,{xRange:[0,this.svg.height],yRange:[0,this.svg.width],xTransform:"",yTransform:"translate(0, "+
this.svg.height+")",barsTransform:function(a){return function(b){return"translate(0, "+a.x(b.x)+")"}}(this),barWidth:function(a){return function(b){return a.y(b.y)}}(this),barHeight:function(b){return function(c){return b.x(a.x+a.dx)-b.x(a.x)-1}}(this)});this.x.range(b.xRange);this.y.range(b.yRange);this.xAxisSelection.attr("transform",b.xTransform).call(this.xAxis);this.yAxisSelection.attr("transform",b.yTransform).call(this.yAxis);this.bars.attr("transform",b.barsTransform);return this.rects.attr("width",
b.barWidth).attr("height",b.barHeight)};a.prototype.draw=function(d){var b,c,e,f;a.__super__.draw.call(this);b=d3.layout.histogram();this.options.domain?(this.x.domain(this.options.domain),this.histogram=b.bins(this.x.ticks(this.options.bins))(d.values),this.xAxis.ticks(this.options.bins)):(this.x.domain(d3.extent(d.values)).nice(),c=this.x.ticks(this.options.bins),this.histogram=b.bins(c)(d.values),this.xAxis.tickValues(c));this.y.domain([0,d3.max(this.histogram,function(a){return a.y})]).nice();
this.options.margin.left=this.calc.calcLeftMargin(this.yAxis,this.options.margin.left);this.xAxisSelection=this.svg.chart.append("g").attr("class","x axis");this.yAxisSelection=this.svg.chart.append("g").attr("class","y axis");this.bars=this.svg.chart.selectAll(".bar").data(this.histogram).enter().append("g").attr("class","bar");this.rects=this.bars.append("rect").attr("x",1);this.options.tooltips&&(f=this.options.tooltipFormat,e=this.tip||(this.tip=new Tooltip$$module$target$coffeescript$histogram(document)),
this.bars.on("mouseover",function(a){e.html(f(a.y));return e.show(this)}));return this.render()};return a}(AbstractChart$$module$target$coffeescript$histogram);var Scales$$module$target$coffeescript$scales,module$target$coffeescript$scales=Scales$$module$target$coffeescript$scales=function(){function c(){}c.fromString=function(a){switch(a){case "linear":return d3.scale.linear();case "log":return d3.scale.log();case "time":return d3.time.scale();case "ordinal":return d3.scale.ordinal()}};return c}();var AbstractChart$$module$target$coffeescript$line_chart,Axes$$module$target$coffeescript$line_chart,LineChart$$module$target$coffeescript$line_chart,MarginCalculator$$module$target$coffeescript$line_chart,Scales$$module$target$coffeescript$line_chart,Tooltip$$module$target$coffeescript$line_chart,defaultLineOptions$$module$target$coffeescript$line_chart,bind$$module$target$coffeescript$line_chart=function(c,a){return function(){return c.apply(a,arguments)}},extend$$module$target$coffeescript$line_chart=
function(c,a){function d(){this.constructor=c}for(var b in a)hasProp$$module$target$coffeescript$line_chart.call(a,b)&&(c[b]=a[b]);d.prototype=a.prototype;c.prototype=new d;c.__super__=a.prototype;return c},hasProp$$module$target$coffeescript$line_chart={}.hasOwnProperty;AbstractChart$$module$target$coffeescript$line_chart=module$target$coffeescript$abstract_chart;Axes$$module$target$coffeescript$line_chart=module$target$coffeescript$axes;MarginCalculator$$module$target$coffeescript$line_chart=module$target$coffeescript$margin_calculator;
Scales$$module$target$coffeescript$line_chart=module$target$coffeescript$scales;Tooltip$$module$target$coffeescript$line_chart=module$target$coffeescript$tooltip;defaultLineOptions$$module$target$coffeescript$line_chart=module$target$coffeescript$defaults.lineOptions;
var module$target$coffeescript$line_chart=LineChart$$module$target$coffeescript$line_chart=function(c){function a(d,b){null==b&&(b={});this.render=bind$$module$target$coffeescript$line_chart(this.render,this);a.__super__.constructor.call(this,d,defaultLineOptions$$module$target$coffeescript$line_chart,b);this.x=Scales$$module$target$coffeescript$line_chart.fromString(this.options.xScale);this.y=Scales$$module$target$coffeescript$line_chart.fromString(this.options.yScale);this.axes=new Axes$$module$target$coffeescript$line_chart(this.svg.chart,
this.x,this.y,this.options,this.axisLabelPadding);"time"===this.options.xScale&&(this.isTimeSeries=!0);this.isTimeSeries&&"string"===typeof this.options.xLabelFormat?this.axes.xAxis.tickFormat(d3.time.format(this.options.xLabelFormat)):this.axes.xAxis.tickFormat(this.options.xLabelFormat);this.axes.yAxis.tickFormat(this.options.yLabelFormat);this.calc=new MarginCalculator$$module$target$coffeescript$line_chart(this.svg);this.line=d3.svg.line().defined(function(a){return null!==a.y});this.area=d3.svg.area().defined(function(a){return null!==
a.y})}extend$$module$target$coffeescript$line_chart(a,c);a.prototype.enterLines=function(a){return a.filter(function(a){return!1!==a.line}).append("path").attr("class",function(a,d){return"line"})};a.prototype.enterAreas=function(a){return a.filter(function(a){return!0===a.area}).append("path").attr("class",function(a,d){return"area"})};a.prototype.createTooltip=function(){var a,b;b=this.tip||(this.tip=new Tooltip$$module$target$coffeescript$line_chart(document));a=this.options.tooltipFormat;this.dots.on("mouseover",
function(c){b.html(a(c.y));return b.show(this)});return this.dots.on("mouseout",function(a){return b.hide()})};a.prototype.render=function(){this.svg.resize();"ordinal"===this.options.xScale?this.x.rangePoints([0,this.svg.width]):this.x.range([0,this.svg.width]);this.y.range([this.svg.height,0]);this.axes.draw(this.svg.width,this.svg.height);this.lines.attr("d",function(a){return function(b){a.line.interpolate(a.chooseInterpolation(b));return a.line(b.values)}}(this));this.areas.attr("d",function(a){return function(b){a.area.interpolate(a.chooseInterpolation(b));
return a.area(b.values)}}(this));return this.dots.attr("cx",function(a){return function(b){return a.x(b.x)}}(this)).attr("cy",function(a){return function(b){return a.y(b.y+b.baseline)}}(this))};a.prototype.chooseInterpolation=function(a){return a.smooth?"monotone":"linear"};a.prototype.formatData=function(a,b){var c,e,f,h,t,u,l,k,m,n,w,x,p,q,v,r,y;null==b&&(b=!1);t=this.isTimeSeries&&"number"===typeof a.labels[0]?a.labels.map(function(a){return new Date(a)}):a.labels;r=p=q=null;m=[];l=a.lines;f=c=
0;for(u=l.length;c<u;f=++c)for(h in k=l[f],m.push({values:Array(k.values.length)}),k)n=k[h],"values"!==h&&(m[f][h]=n);f=n=0;for(u=t.length;n<u;f=++n)for(h=t[f],c=0,x=a.lines,e=w=0,l=x.length;w<l;e=++w){k=x[e];v=k.values[f];y=v+c;if(null==q||q>h)q=h;if(null==p||p<h)p=h;if(null==r||r<y)r=y;e=m[e];e.values[f]={x:h,y:v,baseline:c,lineKey:k.label};b&&(c+=v)}return{labels:t,lines:m,xDomain:[q,p],yDomain:[0,r]}};a.prototype.draw=function(c){var b,g,e;a.__super__.draw.call(this);g=this.formatData(c,this.options.stack);
b=g.labels;c=g.lines;e=g.xDomain;g=g.yDomain;"ordinal"===this.options.xScale?this.x.domain(b):this.x.domain(e);this.y.domain(g).nice();this.line.x(function(a){return function(b){return a.x(b.x)}}(this)).y(function(a){return function(b){return a.y(b.y+b.baseline)}}(this));this.area.x(function(a){return function(b){return a.x(b.x)}}(this)).y0(function(a){return function(b){return a.y(b.baseline)}}(this)).y1(function(a){return function(b){return a.y(b.y+b.baseline)}}(this));this.options.autoMargins&&
(this.options.margin.left=this.calc.calcLeftMargin(this.axes.yAxis,this.options.margin.left));this.lineGroups=this.svg.chart.selectAll(".line").data(c,function(a){return a.label});b=this.lineGroups.enter().append("g").attr("class",function(a,b){return"lineGroup line-"+b+" "+a.label});this.enterLines(b);this.enterAreas(b);this.lines=this.lineGroups.selectAll(".line");this.areas=this.lineGroups.selectAll(".area");this.dotGroups=this.svg.chart.selectAll(".dotGroup").data(c,function(a){return a.label});
this.dotGroups.enter().append("g").attr("class",function(a,b){return"dotGroup line-"+b+" "+a.label});this.dots=this.dotGroups.selectAll(".dot").data(function(a){return function(a){return!1===a.dots?[]:a.values}}(this));this.dots.enter().append("circle").filter(function(a){return null!==a.y}).attr("class",function(a){return"dot"}).attr("r",this.options.dotSize);this.options.tooltips&&this.createTooltip();return this.render()};return a}(AbstractChart$$module$target$coffeescript$line_chart);var module$target$coffeescript$suave_charts={},m$$module$target$coffeescript$suave_charts;m$$module$target$coffeescript$suave_charts={LineChart:module$target$coffeescript$line_chart,BarChart:module$target$coffeescript$bar_chart,Histogram:module$target$coffeescript$histogram,DonutChart:module$target$coffeescript$donut_chart};window.Suave=m$$module$target$coffeescript$suave_charts;})();
