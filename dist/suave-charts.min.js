(function(){var Svg$$module$target$coffeescript$svg,module$target$coffeescript$svg=Svg$$module$target$coffeescript$svg=function(){function c(a,b,d){this.margin=d;d=b.split(":");b=d[0];d=d[1];this.aspectRatio=[parseInt(b),parseInt(d)];this.domElement=document.querySelector(a);this.container=d3.select(this.domElement).append("svg").attr("preserveAspectRatio","xMinYMin");this.chart=this.container.append("g")}c.prototype.resize=function(a){var b,d;null==a&&(a=this.margin);d=this.domElement.offsetWidth;b=d/this.aspectRatio[0]*
this.aspectRatio[1];this.width=d-a.left-a.right;this.height=b-a.bottom-a.top;this.container.attr("width",d).attr("height",b);return this.chart.attr("transform","translate("+a.left+","+a.top+")")};return c}();var defaultBarOptions$$module$target$coffeescript$defaults,defaultDonutOptions$$module$target$coffeescript$defaults,defaultLineOptions$$module$target$coffeescript$defaults,mergeOptions$$module$target$coffeescript$defaults;mergeOptions$$module$target$coffeescript$defaults=function(c,a){var b,d;d={};for(b in c)d[b]=c[b];for(b in a)d[b]=a[b];return d};
defaultLineOptions$$module$target$coffeescript$defaults={xScale:"linear",yScale:"linear",smoothLines:!1,tooltips:!0,aspectRatio:"16:9",tickPadding:10,dotSize:6,grid:!0,xLabelFormat:null,yLabelFormat:null,tooltipFormat:function(c){return d3.format(",.0f")(c)},autoMargins:!0,margin:{top:50,bottom:50,right:80,left:80}};
defaultBarOptions$$module$target$coffeescript$defaults={aspectRatio:"16:9",grid:!0,tooltips:!0,xLabelFormat:null,yLabelFormat:null,tooltipFormat:function(c){return d3.format(",.0f")(c)},barSpacing:0,margin:{top:50,bottom:50,right:80,left:80}};defaultDonutOptions$$module$target$coffeescript$defaults={aspectRatio:"16:9",holeSize:.5,margin:{top:0,bottom:0,right:0,left:0}};
var module$target$coffeescript$defaults={mergeOptions:mergeOptions$$module$target$coffeescript$defaults,lineOptions:defaultLineOptions$$module$target$coffeescript$defaults,barOptions:defaultBarOptions$$module$target$coffeescript$defaults,donutOptions:defaultDonutOptions$$module$target$coffeescript$defaults};var AbstractChart$$module$target$coffeescript$abstract_chart,Svg$$module$target$coffeescript$abstract_chart,defaults$$module$target$coffeescript$abstract_chart;defaults$$module$target$coffeescript$abstract_chart=module$target$coffeescript$defaults;Svg$$module$target$coffeescript$abstract_chart=module$target$coffeescript$svg;
var module$target$coffeescript$abstract_chart=AbstractChart$$module$target$coffeescript$abstract_chart=function(){return function(c,a,b){null==a&&(a={});null==b&&(b={});this.options=defaults$$module$target$coffeescript$abstract_chart.mergeOptions(a,b);this.svg=new Svg$$module$target$coffeescript$abstract_chart(c,this.options.aspectRatio,this.options.margin)}}();var Axes$$module$target$coffeescript$axes,bind$$module$target$coffeescript$axes=function(c,a){return function(){return c.apply(a,arguments)}},module$target$coffeescript$axes=Axes$$module$target$coffeescript$axes=function(){function c(a,b,d,c){this.options=c;this.newAxis=bind$$module$target$coffeescript$axes(this.newAxis,this);this.xAxisSelection=a.append("g").attr("class","x axis");this.yAxisSelection=a.append("g").attr("class","y axis");this.xAxis=this.newAxis(b,"bottom");this.yAxis=this.newAxis(d,
"left")}c.prototype.draw=function(a,b){var d;this.xAxisSelection.attr("transform","translate(0,"+b+")");this.options.grid&&(this.xAxis.tickSize(-b),this.yAxis.tickSize(-a));this.options.xLabelInterval?(d=function(){switch(this.options.xLabelInterval){case "seconds":return d3.time.seconds;case "minutes":return d3.time.minutes;case "hours":return d3.time.hours;case "days":return d3.time.days;case "months":return d3.time.months;case "years":return d3.time.years}}.call(this),this.xAxis.ticks(d)):null!=
this.options.ticks&&0<this.options.ticks&&this.xAxis.ticks(this.options.ticks);this.xAxisSelection.call(this.xAxis);return this.yAxisSelection.call(this.yAxis)};c.prototype.newAxis=function(a,b){return d3.svg.axis().scale(a).orient(b).tickPadding(this.options.tickPadding)};return c}();var MarginCalculator$$module$target$coffeescript$margin_calculator,module$target$coffeescript$margin_calculator=MarginCalculator$$module$target$coffeescript$margin_calculator=function(){function c(a){this.svg=a}c.prototype.calcLeftMargin=function(a,b,d){var c,e;null==d&&(d=20);e=this.svg.chart.append("g").attr("class","y axis").attr("opacity",0);e.call(a);a=e.selectAll("text").sort(function(b,d){return d-b});b=1<=a.length&&1<=a[0].length?(c=a[0][0].getBBox(),Math.round(c.width)+d):b;e.remove();return b};
return c}();var Tooltip$$module$target$coffeescript$tooltip,bind$$module$target$coffeescript$tooltip=function(c,a){return function(){return c.apply(a,arguments)}},module$target$coffeescript$tooltip=Tooltip$$module$target$coffeescript$tooltip=function(){function c(a){this.hide=bind$$module$target$coffeescript$tooltip(this.hide,this);this.show=bind$$module$target$coffeescript$tooltip(this.show,this);this.html=bind$$module$target$coffeescript$tooltip(this.html,this);this.cssClass="suave-tooltip";this.tip=d3.select(a.createElement("div"));
this.tip.attr("class",this.cssClass);a.body.appendChild(this.tip.node())}c.prototype.html=function(a){return this.tip.html(a)};c.prototype.show=function(a){a=this.offset(a);this.tip.attr("class",this.cssClass+" show");return this.tip.style({position:"absolute",top:a.top+"px",left:a.left+"px"})};c.prototype.hide=function(){return this.tip.attr("class",this.cssClass)};c.prototype.offset=function(a){var b,d;b=a.getBoundingClientRect();a=b.left+(b.right-b.left)/2;d=this.tip.node().getBoundingClientRect();
return{top:b.top-(d.bottom-d.top+10)+window.scrollY,left:a-(d.right-d.left)/2+window.scrollX}};return c}();var AbstractChart$$module$target$coffeescript$bar_chart,BarChart$$module$target$coffeescript$bar_chart,MarginCalculator$$module$target$coffeescript$bar_chart,Tooltip$$module$target$coffeescript$bar_chart,defaultBarOptions$$module$target$coffeescript$bar_chart,bind$$module$target$coffeescript$bar_chart=function(c,a){return function(){return c.apply(a,arguments)}},extend$$module$target$coffeescript$bar_chart=function(c,a){function b(){this.constructor=c}for(var d in a)hasProp$$module$target$coffeescript$bar_chart.call(a,
d)&&(c[d]=a[d]);b.prototype=a.prototype;c.prototype=new b;c.__super__=a.prototype;return c},hasProp$$module$target$coffeescript$bar_chart={}.hasOwnProperty;AbstractChart$$module$target$coffeescript$bar_chart=module$target$coffeescript$abstract_chart;MarginCalculator$$module$target$coffeescript$bar_chart=module$target$coffeescript$margin_calculator;Tooltip$$module$target$coffeescript$bar_chart=module$target$coffeescript$tooltip;defaultBarOptions$$module$target$coffeescript$bar_chart=module$target$coffeescript$defaults.barOptions;
var module$target$coffeescript$bar_chart=BarChart$$module$target$coffeescript$bar_chart=function(c){function a(b,d){null==d&&(d={});this.render=bind$$module$target$coffeescript$bar_chart(this.render,this);this.remove=bind$$module$target$coffeescript$bar_chart(this.remove,this);a.__super__.constructor.call(this,b,defaultBarOptions$$module$target$coffeescript$bar_chart,d);this.calc=new MarginCalculator$$module$target$coffeescript$bar_chart(this.svg);this.x=d3.scale.ordinal();this.groupedX=d3.scale.ordinal();
this.y=d3.scale.linear();this.xAxis=d3.svg.axis().scale(this.x).orient("bottom").tickFormat(this.options.xLabelFormat);this.yAxis=d3.svg.axis().scale(this.y).orient("left").tickFormat(this.options.yLabelFormat)}extend$$module$target$coffeescript$bar_chart(a,c);a.prototype.remove=function(){var b,d;window.removeEventListener("resize",this.render);b=this.svg.domElement;for(d=[];b.firstChild;)d.push(b.removeChild(b.firstChild));return d};a.prototype.render=function(){this.svg.resize();this.options.grid&&
this.yAxis.tickSize(-this.svg.width);this.x.rangeRoundBands([0,this.svg.width],.1);this.groupedX.rangeRoundBands([0,this.x.rangeBand()],this.options.barSpacing);this.y.range([this.svg.height,0]);this.xAxisSelection.attr("transform","translate(0, "+this.svg.height+")").call(this.xAxis);this.yAxisSelection.call(this.yAxis);this.groups.attr("transform",function(b){return function(d){return"translate("+b.x(d)+", 0)"}}(this));return this.bars.attr("x",function(b){return function(d,a){return b.groupedX(a)}}(this)).attr("y",
function(b){return function(d){return b.y(d)}}(this)).attr("width",this.groupedX.rangeBand()).attr("height",function(b){return function(d){return b.svg.height-b.y(d)}}(this))};a.prototype.draw=function(b){var d,a,c,g;this.drawCalled||(window.addEventListener("resize",this.render),this.drawCalled=!0);a=function(){var a,c,e,f;e=b.bars;f=[];a=0;for(c=e.length;a<c;a++)d=e[a],f.push("[object Array]"===Object.prototype.toString.call(d)?d:[d]);return f}();this.y.domain([0,d3.max(d3.merge(a,function(b){return d3.max(b)}))]);
this.x.domain(b.labels);this.groupedX.domain(a[0].map(function(b,a){return a}));this.options.margin.left=this.calc.calcLeftMargin(this.yAxis,this.options.margin.left);this.xAxisSelection=this.svg.chart.append("g").attr("class","x axis");this.yAxisSelection=this.svg.chart.append("g").attr("class","y axis");this.groups=this.svg.chart.selectAll(".bar-group").data(b.labels).enter().append("g").attr("class",function(b){return"bar-group "+b});this.bars=this.groups.selectAll(".bar").data(function(b,d){return a[d]}).enter().append("rect").attr("class",
function(b,a){return"bar bar-"+a});this.options.tooltips&&(g=this.options.tooltipFormat,c=this.tip||(this.tip=new Tooltip$$module$target$coffeescript$bar_chart(document)),this.bars.on("mouseover",function(b){c.html(g(b));return c.show(this)}),this.bars.on("mouseout",function(b){return c.hide()}));return this.render()};return a}(AbstractChart$$module$target$coffeescript$bar_chart);var AbstractChart$$module$target$coffeescript$donut_chart,DonutChart$$module$target$coffeescript$donut_chart,defaultDonutOptions$$module$target$coffeescript$donut_chart,bind$$module$target$coffeescript$donut_chart=function(c,a){return function(){return c.apply(a,arguments)}},extend$$module$target$coffeescript$donut_chart=function(c,a){function b(){this.constructor=c}for(var d in a)hasProp$$module$target$coffeescript$donut_chart.call(a,d)&&(c[d]=a[d]);b.prototype=a.prototype;c.prototype=new b;c.__super__=
a.prototype;return c},hasProp$$module$target$coffeescript$donut_chart={}.hasOwnProperty;AbstractChart$$module$target$coffeescript$donut_chart=module$target$coffeescript$abstract_chart;defaultDonutOptions$$module$target$coffeescript$donut_chart=module$target$coffeescript$defaults.donutOptions;
var module$target$coffeescript$donut_chart=DonutChart$$module$target$coffeescript$donut_chart=function(c){function a(b,d){null==d&&(d={});this.draw=bind$$module$target$coffeescript$donut_chart(this.draw,this);this.render=bind$$module$target$coffeescript$donut_chart(this.render,this);this.remove=bind$$module$target$coffeescript$donut_chart(this.remove,this);a.__super__.constructor.call(this,b,defaultDonutOptions$$module$target$coffeescript$donut_chart,d);this.options.margin={top:0,bottom:0,left:0,
right:0};this.arc=d3.svg.arc();this.pie=d3.layout.pie().sort(null).value(function(b){return b[1]})}extend$$module$target$coffeescript$donut_chart(a,c);a.prototype.remove=function(){var b,a;window.removeEventListener("resize",this.render);b=this.svg.domElement;for(a=[];b.firstChild;)a.push(b.removeChild(b.firstChild));return a};a.prototype.render=function(){var b;this.svg.resize();b=Math.min(this.svg.width,this.svg.height)/2;this.svg.chart.attr("transform","translate("+this.svg.width/2+", "+this.svg.height/
2+")");this.arc.innerRadius(b).outerRadius(b-b*this.options.holeSize);this.arcs.attr("d",this.arc);return this.labels.attr("transform",function(b){return function(a){return"translate("+b.arc.centroid(a)+")"}}(this))};a.prototype.draw=function(b){this.drawCalled||(window.addEventListener("resize",this.render),this.drawCalled=!0);this.enter=this.svg.chart.selectAll(".arc").data(this.pie(b)).enter().append("g").attr("class",function(b,a){return"arc arc-"+a+" arc-"+b.data[0]+"}"});this.arcs=this.enter.append("path");
this.labels=this.enter.append("text").attr("dy",".35em").text(function(b){return b.data[0]});return this.render()};return a}(AbstractChart$$module$target$coffeescript$donut_chart);var Scales$$module$target$coffeescript$scales,module$target$coffeescript$scales=Scales$$module$target$coffeescript$scales=function(){function c(){}c.fromString=function(a){switch(a){case "linear":return d3.scale.linear();case "log":return d3.scale.log();case "time":return d3.time.scale();case "ordinal":return d3.scale.ordinal()}};return c}();var AbstractChart$$module$target$coffeescript$line_chart,Axes$$module$target$coffeescript$line_chart,LineChart$$module$target$coffeescript$line_chart,MarginCalculator$$module$target$coffeescript$line_chart,Scales$$module$target$coffeescript$line_chart,Tooltip$$module$target$coffeescript$line_chart,defaultLineOptions$$module$target$coffeescript$line_chart,bind$$module$target$coffeescript$line_chart=function(c,a){return function(){return c.apply(a,arguments)}},extend$$module$target$coffeescript$line_chart=
function(c,a){function b(){this.constructor=c}for(var d in a)hasProp$$module$target$coffeescript$line_chart.call(a,d)&&(c[d]=a[d]);b.prototype=a.prototype;c.prototype=new b;c.__super__=a.prototype;return c},hasProp$$module$target$coffeescript$line_chart={}.hasOwnProperty;AbstractChart$$module$target$coffeescript$line_chart=module$target$coffeescript$abstract_chart;Axes$$module$target$coffeescript$line_chart=module$target$coffeescript$axes;MarginCalculator$$module$target$coffeescript$line_chart=module$target$coffeescript$margin_calculator;
Scales$$module$target$coffeescript$line_chart=module$target$coffeescript$scales;Tooltip$$module$target$coffeescript$line_chart=module$target$coffeescript$tooltip;defaultLineOptions$$module$target$coffeescript$line_chart=module$target$coffeescript$defaults.lineOptions;
var module$target$coffeescript$line_chart=LineChart$$module$target$coffeescript$line_chart=function(c){function a(b,d){null==d&&(d={});this.render=bind$$module$target$coffeescript$line_chart(this.render,this);this.remove=bind$$module$target$coffeescript$line_chart(this.remove,this);a.__super__.constructor.call(this,b,defaultLineOptions$$module$target$coffeescript$line_chart,d);this.x=Scales$$module$target$coffeescript$line_chart.fromString(this.options.xScale);this.y=Scales$$module$target$coffeescript$line_chart.fromString(this.options.yScale);
this.axes=new Axes$$module$target$coffeescript$line_chart(this.svg.chart,this.x,this.y,this.options);"time"===this.options.xScale&&(this.isTimeSeries=!0);this.isTimeSeries&&"string"===typeof this.options.xLabelFormat?this.axes.xAxis.tickFormat(d3.time.format(this.options.xLabelFormat)):this.axes.xAxis.tickFormat(this.options.xLabelFormat);this.axes.yAxis.tickFormat(this.options.yLabelFormat);this.calc=new MarginCalculator$$module$target$coffeescript$line_chart(this.svg);this.line=d3.svg.line().defined(function(b){return null!==
b});this.area=d3.svg.area().defined(function(b){return null!==b})}extend$$module$target$coffeescript$line_chart(a,c);a.prototype.enterLines=function(b){return b.append("path").attr("class",function(b){return"line "+b.label})};a.prototype.enterAreas=function(b){return b.filter(function(b){return!0===b.area}).append("path").attr("class",function(b){return"area "+b.label})};a.prototype.createTooltip=function(){var b,a;a=this.tip||(this.tip=new Tooltip$$module$target$coffeescript$line_chart(document));
b=this.options.tooltipFormat;this.dots.on("mouseover",function(c){a.html(b(c.y));return a.show(this)});return this.dots.on("mouseout",function(b){return a.hide()})};a.prototype.remove=function(){var b,a;window.removeEventListener("resize",this.render);b=this.svg.domElement;for(a=[];b.firstChild;)a.push(b.removeChild(b.firstChild));return a};a.prototype.render=function(){this.svg.resize();this.x.range([0,this.svg.width]);this.y.range([this.svg.height,0]);this.axes.draw(this.svg.width,this.svg.height);
this.lines.attr("d",function(b){return function(a){b.line.interpolate(b.chooseInterpolation(a));return b.line(a.values)}}(this));this.area.y0(this.svg.height);this.areas.attr("d",function(b){return function(a){b.area.interpolate(b.chooseInterpolation(a));return b.area(a.values)}}(this));return this.dots.attr("cx",function(b){return function(a){return b.x(a.x)}}(this)).attr("cy",function(b){return function(a){return b.y(a.y)}}(this))};a.prototype.chooseInterpolation=function(a){return a.smooth?"monotone":
"linear"};a.prototype.draw=function(a){var d,c;this.drawCalled||(window.addEventListener("resize",this.render),this.drawCalled=!0);this.xLabels=this.isTimeSeries&&"number"===typeof a.labels[0]?a.labels.map(function(a){return new Date(a)}):a.labels;c=d3.merge(function(){var c,g,h,k;h=a.lines;k=[];c=0;for(g=h.length;c<g;c++)d=h[c],k.push(d.values);return k}());this.x.domain(d3.extent(this.xLabels,function(a){return a})).nice();this.y.domain([0,d3.max(c,function(a){return a})]).nice();this.line.x(function(a){return function(b,
c){return a.x(a.xLabels[c])}}(this)).y(function(a){return function(b){return a.y(b)}}(this));this.area.x(function(a){return function(b,c){return a.x(a.xLabels[c])}}(this)).y(function(a){return function(b){return a.y(b)}}(this));this.options.autoMargins&&(this.options.margin.left=this.calc.calcLeftMargin(this.axes.yAxis,this.options.margin.left));this.lineGroups=this.svg.chart.selectAll(".lineGroup").data(a.lines,function(a){return a.label});c=this.lineGroups.enter().append("g").attr("class","lineGroup");
this.enterLines(c);this.enterAreas(c);this.lines=this.lineGroups.selectAll(".line");this.areas=this.lineGroups.selectAll(".area");this.dotGroups=this.svg.chart.selectAll(".dotGroup").data(a.lines,function(a){return a.label});this.dotGroups.enter().append("g").attr("class","dotGroup");this.dots=this.dotGroups.selectAll(".dot").data(function(a){return function(b){var c,d,f,l,m,n;if(!1===b.dots)return[];l=b.values;m=[];c=d=0;for(f=l.length;d<f;c=++d)n=l[c],m.push({x:a.xLabels[c],y:n,label:b.label});
return m}}(this));this.dots.enter().append("circle").filter(function(a){return null!==a.y}).attr("class",function(a){return"dot "+a.label}).attr("r",this.options.dotSize);this.options.tooltips&&this.createTooltip();return this.render()};return a}(AbstractChart$$module$target$coffeescript$line_chart);var module$target$coffeescript$suave_charts={},m$$module$target$coffeescript$suave_charts;m$$module$target$coffeescript$suave_charts={LineChart:module$target$coffeescript$line_chart,BarChart:module$target$coffeescript$bar_chart,DonutChart:module$target$coffeescript$donut_chart};window.Suave=m$$module$target$coffeescript$suave_charts;})();
